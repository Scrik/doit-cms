<?php
$this->table='text';

//1. Определение ID страницы по url, получение всех свойств	
//$result=mysql_query("select * from `".$this->table."` where `url`='". mysql_real_escape_string ($_SERVER['REQUEST_URI'])."'");

 
//print $this->Parent();
//ORM-обработчик для текстовых страниц

 
 
 /*
 
 
 header
 default
 footer
 
 
 leftmenu
 rightmenu
 
 
 
 /news/ =>  default default 

 
 
//$page=d()->Page;
 
render(d()->Page->order('title')->all)
render(d()->Page->find(1)->all)
render(d()->Page->find('/pagename')->comments)
*/
//свойства по умолчанию можно взять в инишках

//$page->options['table']=>'blablalla';
//Pages
//News

/*

$page->find(1)
$page->title
$page->all
$page->comment->author



$page=Page->first
$page=Page->last



$page=Page()->where('url = ?','/catalog');
$page=Page()
$page->where('url = ?','/catalog');
$page->limit(10);
$page.all

$page->order('desc');

$page->author



таблица: users
класс: User
массив users
ссылка /users/
элемент (user)




*/




//var_dump (d()->User);
 
 
$page=d()->Text->find_by_url($_SERVER['REQUEST_URI'])->one;
    
	//FIXME:	print $this->default($page[0]); в случае 404
	//print $this->default($page[0]);
	 
if ($page){
       print $this->default($page);
} else {
	print "Страница не существует";
	$this->newurl=$_SERVER['REQUEST_URI'];
    print $this->addbutton();
}


?>