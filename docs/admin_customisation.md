Кастомизация администраторской панели
=====================================

Doit cms имеет возможности для некоторой кастомизации и переопределения стандартного поведения: столбцы в списке объектов, свои собственные элементы управления, настройка сортировки и так далее.

В большинстве случаев данные возможности не нужны, однако в некоторых случаях они могут пригодиться.

Список и сортировка
-------------------

Для настроек в большинстве случаев используется файл ini в папке fields, привязанный к таблице. Например, для таблицы pages это файл /app/fields/pages.ini. Также этот файл можно редактировать на странице добавления объекта
при помощи меню Скаффолдинг → Текущий шаблон.

### Указание столбцов

Для указания столбцов, отображаемых в списке элементов, выделен раздел опций `[admin.columns]`.

В этом разделе указываются столбцы в виде `столбец=Название столбца для администратора`. Несколько столбцов настраиваются на нескольких строках. Например:

	[admin.columns]
	url=Адрес страницы
	title=Заголовок страницы
	
или

	[admin.columns]
	title=Название
	color=Цвет
	price=Стоимость
	
### Направление сортировки

По умолчанию система сортирует по полю `sort`, от меньшего значения к большему. Если необходимо инвертировать направление сортировки, следует указать файле следующее:

	[admin.list]
	sort_direction=asc
	
`sort_direction` может принимать два значения: `asc` и `desc`. Эта опция автоматически прикрепляется также к странице сортировки порядка элементов. Следует обратить внимание, что установка опции никак не повлияет на поведение объектов модели и контроллера на самом сайте, для этого есть метод `order_by` объекта `ActiveRecord`.

### Поле сортировки

Для переопределения поля, по которому производится сортировка (например, по алфавиту), используется параметр `sort_field`. При указании это поля сортировка порядка элементов потеряет смысл, так как она основана на манипуляции значениями поля `sort`.

Например:
	
	[admin.list]
	sort_field=title

Также доступно использование обеих параметров:

	[admin.list]
	sort_field=title
	sort_direction=asc

Эта опция бесполезна в некоторых случаях, например, когда поле стоимости является текстовым (в данном случае сортировка произойдёт по алфавиту) или по текстовому полю даты формата `userdate`, в данном случае сортировка
также произойдёт по алфавиту. Эту опцию можно использовать например для того, чтобы вывести непромодерированные записи в верху списка (`sort_field=is_active`) или отсортировать по дате последнего изменения (`sort_field=updated_at`).

Для сортировки по более сложным полям (даты, цены в текстовых строках, сортировка по нескольким столбцам) необходимо использовать опцию `source` с заданными параметрами сортировки.

### TODO: Переопределение значений в таблице

### TODO: Опция `source`: привязка источника данных

### Постраничная навигация

Постраничная навигация появляется в системе, начиная с 100-го элемента. Однако можно переопределить это число, используя опцию `paginator`:

	[admin.use_model]
	paginator=10

Если система автоматически перебивает пагинатор, заданный в параметре `source`, то можно указать `paginator=yes`, или другое нечисловое значение.


### TODO: Переопределение столбца для списка сортировки

 

TODO: Пользовательские элементы управления
------------------------------------------

TODO: Действия при сохранении
-----------------------------


TODO: Примеры использования
---------------------------

### Модерация

### Картинки в списке и при сортировке

### Поля "Да" и "Нет"
